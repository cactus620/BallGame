var gamejs = require('gamejs');

function main() {
    var display = gamejs.display.setMode([400, 400]);

    var ball = gamejs.image.load('images/ball.png');
    var bg = gamejs.image.load('images/bg.png');
    var bgPosition = [0, 0];
    
    // 180 positions
    var ballPositions = [
            [180.00,20.00],[196.72,20.88],[213.27,23.50],[229.44,27.83],[245.08,33.83],
            [260.00,41.44],[274.05,50.56],[287.06,61.10],[298.90,72.94],[309.44,85.95],
            [318.56,100.00],[326.17,114.92],[332.17,130.56],[336.50,146.73],[339.12,163.28],
            [340.00,180.00],[339.12,196.72],[336.50,213.27],[332.17,229.44],[326.17,245.08],
            [318.56,260.00],[309.44,274.05],[298.90,287.06],[287.06,298.90],[274.05,309.44],
            [260.00,318.56],[245.08,326.17],[229.44,332.17],[213.27,336.50],[196.72,339.12],
            [180.00,340.00],[163.28,339.12],[146.73,336.50],[130.56,332.17],[114.92,326.17],
            [100.00,318.56],[85.95,309.44],[72.94,298.90],[61.10,287.06],[50.56,274.05],
            [41.44,260.00],[33.83,245.08],[27.83,229.44],[23.50,213.27],[20.88,196.72],
            [20.00,180.00],[20.88,163.28],[23.50,146.73],[27.83,130.56],[33.83,114.92],
            [41.44,100.00],[50.56,85.95],[61.10,72.94],[72.94,61.10],[85.95,50.56],
            [100.00,41.44],[114.92,33.83],[130.56,27.83],[146.73,23.50],[163.28,20.88],
            [180.00,20.00],[196.72,20.88],[213.27,23.50],[229.44,27.83],[245.08,33.83],
            [260.00,41.44],[274.05,50.56],[287.06,61.10],[298.90,72.94],[309.44,85.95],
            [318.56,100.00],[326.17,114.92],[332.17,130.56],[336.50,146.73],[339.12,163.28],
            [340.00,180.00],[339.12,196.72],[336.50,213.27],[332.17,229.44],[326.17,245.08],
            [318.56,260.00],[309.44,274.05],[298.90,287.06],[287.06,298.90],[274.05,309.44],
            [260.00,318.56],[245.08,326.17],[229.44,332.17],[213.27,336.50],[196.72,339.12],
            [180.00,340.00],[163.28,339.12],[146.73,336.50],[130.56,332.17],[114.92,326.17],
            [100.00,318.56],[85.95,309.44],[72.94,298.90],[61.10,287.06],[50.56,274.05],
            [41.44,260.00],[33.83,245.08],[27.83,229.44],[23.50,213.27],[20.88,196.72],
            [20.00,180.00],[20.88,163.28],[23.50,146.73],[27.83,130.56],[33.83,114.92],
            [41.44,100.00],[50.56,85.95],[61.10,72.94],[72.94,61.10],[85.95,50.56],
            [100.00,41.44],[114.92,33.83],[130.56,27.83],[146.73,23.50],[163.28,20.88],
            [180.00,20.00],[196.72,20.88],[213.27,23.50],[229.44,27.83],[245.08,33.83],
            [260.00,41.44],[274.05,50.56],[287.06,61.10],[298.90,72.94],[309.44,85.95],
            [318.56,100.00],[326.17,114.92],[332.17,130.56],[336.50,146.73],[339.12,163.28],
            [340.00,180.00],[339.12,196.72],[336.50,213.27],[332.17,229.44],[326.17,245.08],
            [318.56,260.00],[309.44,274.05],[298.90,287.06],[287.06,298.90],[274.05,309.44],
            [260.00,318.56],[245.08,326.17],[229.44,332.17],[213.27,336.50],[196.72,339.12],
            [180.00,340.00],[163.28,339.12],[146.73,336.50],[130.56,332.17],[114.92,326.17],
            [100.00,318.56],[85.95,309.44],[72.94,298.90],[61.10,287.06],[50.56,274.05],
            [41.44,260.00],[33.83,245.08],[27.83,229.44],[23.50,213.27],[20.88,196.72],
            [20.00,180.00],[20.88,163.28],[23.50,146.73],[27.83,130.56],[33.83,114.92],
            [41.44,100.00],[50.56,85.95],[61.10,72.94],[72.94,61.10],[85.95,50.56],
            [100.00,41.44],[114.92,33.83],[130.56,27.83],[146.73,23.50],[163.28,20.88]];
            //[[20, 180], [180, 340], [340, 180], [180, 20]];
 
    gamejs.onEvent(function() {
        // event handling
    });

    var pos = 0;
    gamejs.onTick(function(msDuration) {
        // game loop 
        pos += msDuration * 0.02;
        if (pos >= 180)
            pos = 0;

      display.clear();
      display.blit(bg, bgPosition);
      var index = Math.floor(pos);
      display.blit(ball, ballPositions[index]);
    });
}

gamejs.preload([
   'images/ball.png',
   'images/bg.png'
]);

gamejs.ready(main);
